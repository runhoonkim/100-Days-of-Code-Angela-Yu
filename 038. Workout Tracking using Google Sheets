from dotenv import load_dotenv
load_dotenv()
import os
import requests
import datetime as dt

date = dt.datetime.now().strftime('%d/%m/%Y')
time = dt.datetime.now().strftime('%H:%M:%S')

APP_ID = os.getenv('APP_ID')
APP_KEY = os.getenv('APP_KEY')
WORKOUT_ENDPOINT = "https://app.100daysofpython.dev/v1/nutrition/natural/exercise"
SHEETY_APP_KEY = os.getenv('SHEETY_APP_KEY')
SHEETY_ENDPOINT = f"https://api.sheety.co/{SHEETY_APP_KEY}/workoutTracker/workouts"


headers = {
    "x-app-id": APP_ID,
    "x-app-key": APP_KEY
}

query = input("Tell me which exercises you did: ")
params = {
    "query": query,
}

workout_data = requests.post(url=f"{WORKOUT_ENDPOINT}", json=params, headers=headers).json()
workout_dict = {
    "workout": {
        "date": date,
        "time": time,
        "exercise": workout_data["exercises"][0]['name'].title(),
        "duration": workout_data["exercises"][0]["duration_min"],
        "calories": workout_data["exercises"][0]["nf_calories"],
     }
}

# print(workout_data)
# print(workout_dict)
response = requests.post(url=SHEETY_ENDPOINT, json=workout_dict)
print(response.json())
