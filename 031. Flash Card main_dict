from tkinter import *
from tkinter import messagebox
import pandas as pd
import random

BACKGROUND_COLOR = "#B1DDC6"
FONT_NAME = "Arial"

data = pd.read_csv("data/french_words.csv")

# From column name set guess language and answer language
guess_lang = data.columns[0]
ans_lang = data.columns[1]

# A dictionary of words to be guessed and answer
data_dict = {row[guess_lang]:row[ans_lang] for index, row in data.iterrows()}

remain_words = len(data_dict)
# ------------------------ GET NEW WORD------------------------ #
def get_new_word():
    global remain_words
    new_word = random.choice(list(data_dict.keys()))

    canvas.itemconfig(card, image=card_front)
    canvas.itemconfig(title, text=guess_lang)
    canvas.itemconfig(word, text=new_word)
    if remain_words > 0:
        window.after(3000, flip_card, remain_words)
    else:
        messagebox.showinfo(title="Success", message=f"No more words left. Great work!")

# ------------------------ FLIP CARD ------------------------ #
def flip_card(num):
    canvas.itemconfig(card, image=card_back)
    canvas.itemconfig(title, text=ans_lang)
    guess_word = canvas.itemcget(word, "text")
    ans_word = data_dict[guess_word]
    canvas.itemconfig(word, text=ans_word)
    if num > 0 and title == guess_lang:
        window.after(3000, flip_card, remain_words)

# ------------------------ DELETE WORD ------------------------ #
def delete_and_get_word():
    guess_word = canvas.itemcget(word, "text")
    del data_dict[guess_lang]
    get_new_word()

# ------------------------ UI SETUP ------------------------ #
window = Tk()
window.title("Flashy")
window.config(padx=50, pady=50, bg=BACKGROUND_COLOR)

window.after(3000, flip_card, remain_words)

# Load images
card_front = PhotoImage(file="images/card_front.png")
card_back = PhotoImage(file="images/card_back.png")
right = PhotoImage(file="images/right.png")
wrong = PhotoImage(file="images/wrong.png")

# Set up canvas with image and text
canvas = Canvas(window, width=800, height=576, bg=BACKGROUND_COLOR, highlightthickness=0)
card = canvas.create_image(400, 300, image=card_front)
title = canvas.create_text(400, 150, text=guess_lang, font=(FONT_NAME, 40, "italic"))
word = canvas.create_text(400, 263, text=random.choice(list(data_dict.keys())), font=(FONT_NAME, 60, "bold"))
canvas.grid(row=0, column=0, columnspan=2)

# Buttons
right_button = Button(image=right, highlightthickness=0, highlightbackground=BACKGROUND_COLOR, command=get_new_word)
wrong_button = Button(image=wrong, highlightthickness=0, highlightbackground=BACKGROUND_COLOR, command=get_new_word)
right_button.grid(row=1, column=1)
wrong_button.grid(row=1, column=0)

window.mainloop()



